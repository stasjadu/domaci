
  
#include <stdio.h>
#include <stdlib.h>

int main()
{
	FILE *my_stream;
	int choice =0;
	char value[3];
	
	while (3)
	{
		printf("\t1: Upisi u FIFO bafer\n");
    		printf("\t2: Procitaj iz FIFO bafera\n");
    		printf("\t3: Izadji\n");
		scanf("%d", &choice);

		switch(choice)
		{
			case 1:
			{
        			printf("Unesite brojeve u hexadecimalnom formatu: \n");
				int condition, condition1 = 3;
				my_stream = fopen("/dev/fifo","w");
				if(my_stream == NULL){
					printf("Greska pri otvaranju /dev/fifo");
					return -1;
				}
	
				while(condition1)
				{
					printf("Unesite hexadecimalan broj: ");
					scanf("%s",value);
					if(uslov)
					{
						fprintf(my_stream,"%s",value);
						condition = 0;
					}
					else
					{
						if(condition[0] == 'Q')
							condition1 = 0;
						else
							fprintf(my_stream, ";%s", condition);
					}
				}
				fputs("\n",my_stream);
	
				if(fclose(my_stream)){
					printf("Greska pri zatvaranju /dev/fifo");
					return -1;
				}
				break;
			}
			case 2:
			{
				char *number;
				size_t bits = 3;
				my_stream = fopen("/dev/fifo","r");
				if(my_stream == NULL){
					puts("Problem pri otvaranju /dev/fifo");
					return -1;
				}
	
				number = (char *) malloc(bits);
				getline(&number, &bits, my_stream);
				printf("Broj je: %s\n", number);
	
				if(fclose(my_stream)){
					puts("Problem pri zatvaranju bibilioteke");
					return -1;
				}
				break;
			}
			case 3:
        		printf("Kraj programa.\n");
				return 0;
		}
	}
}
